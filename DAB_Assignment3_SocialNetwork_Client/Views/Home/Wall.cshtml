
@{
    ViewData["Title"] = "Wall";
}

<h1>User Wall</h1>
<div class="my-3 p-3 bg-white rounded box-shadow" id="wall">
    <h6 class="border-bottom border-gray pb-2 mb-0">Recent updates</h6>
    <post-template v-for="post in posts"
                   v-bind:username="post.username"
                   v-bind:content="post.postContent"
                   v-bind:comments="comments"
                   ></post-template>
</div>

<script type="text/x-template" id="post">
    <div id="post">
        <div class="media text-muted pt-3">
            <img src="/Images/icons8-administrator-male-52.png" width="40" height="40" />
            <p class="media-body pb-3 mb-0 small lh-125 border-bottom border-gray">
                <strong class="d-block text-gray-dark">{{username}}</strong>
                {{Content}}
            </p>
        </div>
        <div v-for="comment in comments" class="col-sm-12 comment ">
            {{comment.text}}
        </div>
        <div class="row commentBtn" >
            <input class="col-9"/>
            <button class="col-3" v-on:click="$emit('addComment')">Comment</button>
        </div>
    </div>
</script>
<!-- Component-->
<script>
    Vue.component('post-template', {
        props: ['username', 'content', 'comments', 'currentComment'],
        template: '#post',
        addComment: function() {
            comments.add(this.currentComment); 
        }
    })
</script>

<!-- Her skal der fetches!-->
<script>
    new Vue({
        el: '#wall',
        data: {
            posts: [
                { username: 'Tristan', postContent: 'Hej med jer!' }
            ],
            comments: [
                { text: "Hej igen!" },
                { text: "Jamen dog!" }
            ]
        }
    })
</script>

